<section class="sb-top-feature-highlights" id="sb-top-feature-highlights-{{ section.id }}" data-sb-reveal>
  {% if section.settings.title != blank %}
    <h2 class="sb-top-feature-highlights__title font-title weight-bold" data-sb-reveal-item>
      {{ section.settings.title }}
    </h2>
  {% endif %}

  <div class="sb-top-feature-highlights__items" style="--sb-top-feature-columns: {{ section.blocks.size | at_least: 1 }};">
    {% for block in section.blocks %}
      {% assign icon_url = '' %}
      {% if block.settings.icon != blank %}
        {% assign icon_url = block.settings.icon | image_url: width: 192 %}
      {% else %}
        {% assign icon_url = 'icon-top-feature-highlight-placeholder.svg' | asset_url %}
      {% endif %}

      <article
        class="sb-top-feature-highlights__item"
        style="--sb-highlight-gradient: {{ block.settings.gradient_value }}; --sb-highlight-mask-url: url('{{ icon_url }}');"
        data-sb-reveal-item
        {{ block.shopify_attributes }}
      >
        <div class="sb-top-feature-highlights__icon" aria-hidden="true">
          <span class="sb-top-feature-highlights__icon-glyph"></span>
        </div>

        {% if block.settings.title != blank %}
          <h3 class="sb-top-feature-highlights__item-title font-body weight-bold">{{ block.settings.title }}</h3>
        {% endif %}

        {% if block.settings.body != blank %}
          <div class="sb-top-feature-highlights__item-body font-body weight-regular rte">
            {{ block.settings.body }}
          </div>
        {% endif %}
      </article>
    {% endfor %}
  </div>
</section>

{% stylesheet %}
  .sb-top-feature-highlights {
    width: 100%;
  }

  .sb-top-feature-highlights__title {
    color: var(--sb-color-neutral-900);
    margin: 0 0 var(--sb-space-48);
    text-align: center;
  }

  .sb-top-feature-highlights__items {
    align-items: stretch;
    display: grid;
    gap: var(--sb-space-36);
    grid-template-columns: repeat(var(--sb-top-feature-columns), minmax(0, 1fr));
    justify-items: center;
    width: 100%;
  }

  .sb-top-feature-highlights__item {
    align-items: center;
    display: flex;
    flex-direction: column;
    max-width: 240px;
    text-align: center;
    width: 100%;
  }

  .sb-top-feature-highlights__icon {
    height: var(--sb-space-48);
    width: var(--sb-space-48);
  }

  .sb-top-feature-highlights__icon-glyph {
    background: var(--sb-highlight-gradient);
    display: block;
    height: 100%;
    mask-image: var(--sb-highlight-mask-url);
    mask-position: center;
    mask-repeat: no-repeat;
    mask-size: contain;
    -webkit-mask-image: var(--sb-highlight-mask-url);
    -webkit-mask-position: center;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: contain;
    width: 100%;
  }

  .sb-top-feature-highlights__item-title {
    background: var(--sb-highlight-gradient);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
    margin: var(--sb-space-4) 0 0;
  }

  .sb-top-feature-highlights__item-body {
    color: var(--sb-color-neutral-900);
    margin-top: var(--sb-space-8);
  }

  .sb-top-feature-highlights__item-body > * {
    margin: 0;
  }

  .sb-top-feature-highlights__item-body > * + * {
    margin-top: var(--sb-space-8);
  }

  @media (max-width: 749px) {
    .sb-top-feature-highlights__items {
      gap: var(--sb-space-30);
      grid-template-columns: minmax(0, 1fr);
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Top feature highlights",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Top feature highlights"
    }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "Highlight item",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon (White SVG files only)",
          "info": "Target minimum 48x48. White SVG files only."
        },
        {
          "type": "select",
          "id": "gradient_value",
          "label": "Gradient",
          "default": "linear-gradient(135deg, #FF0739 0%, #8E3BFF 100%)",
          "options": [
            {
              "value": "linear-gradient(135deg, #FF0739 0%, #8E3BFF 100%)",
              "label": "Gradient 1"
            },
            {
              "value": "linear-gradient(135deg, #E67702 0%, #FF4700 100%)",
              "label": "Gradient 2"
            },
            {
              "value": "linear-gradient(135deg, #0097FF 0%, #00FCA4 100%)",
              "label": "Gradient 3"
            },
            {
              "value": "linear-gradient(135deg, #FFD147 0%, #FF9E18 100%)",
              "label": "Gradient 4"
            },
            {
              "value": "linear-gradient(135deg, #FF8387 0%, #FF1F34 100%)",
              "label": "Gradient 5"
            },
            {
              "value": "linear-gradient(135deg, #FFC285 0%, #D46A15 100%)",
              "label": "Spark 1"
            },
            {
              "value": "linear-gradient(135deg, #7CD9B0 0%, #1E9980 100%)",
              "label": "Spark 2"
            },
            {
              "value": "linear-gradient(135deg, #CDE1F0 0%, #77A6D3 100%)",
              "label": "Spark 3"
            },
            {
              "value": "linear-gradient(135deg, #B697DF 0%, #7A4AB2 100%)",
              "label": "Spark 4"
            },
            {
              "value": "linear-gradient(135deg, #F48F85 0%, #C43D33 100%)",
              "label": "Spark 5"
            }
          ]
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Highlight title"
        },
        {
          "type": "richtext",
          "id": "body",
          "label": "Body",
          "default": "<p>Highlight body copy.</p>"
        }
      ]
    }
  ],
  "max_blocks": 5,
  "presets": [
    {
      "name": "Top feature highlights",
      "blocks": [
        {
          "type": "item"
        },
        {
          "type": "item"
        },
        {
          "type": "item"
        }
      ]
    }
  ]
}
{% endschema %}
