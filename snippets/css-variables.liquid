{% assign sb_primary_font_regular = settings.type_primary_font %}
{% assign sb_primary_font_medium = settings.type_primary_font | font_modify: 'weight', '500' %}
{% assign sb_primary_font_semibold = settings.type_primary_font | font_modify: 'weight', '600' %}
{% assign sb_primary_font_bold = settings.type_primary_font | font_modify: 'weight', 'bold' %}
{% assign sb_primary_font_italic = settings.type_primary_font | font_modify: 'style', 'italic' %}
{% assign sb_primary_font_bold_italic = settings.type_primary_font | font_modify: 'weight', 'bold' | font_modify: 'style', 'italic' %}
{% assign sb_display_font_regular = settings.type_display_font %}
{% assign sb_display_font_bold = settings.type_display_font | font_modify: 'weight', 'bold' %}

{% style %}
  {% comment %}
    Use theme-scoped font family aliases so late third-party styles that target generic family names
    (e.g. Inter, Merriweather) can't override typography after initial paint.
  {% endcomment %}
  {% unless settings.type_primary_font.system? %}
    @font-face {
      font-family: 'SB Primary';
      src: url('{{ sb_primary_font_regular | font_url }}');
      font-style: {{ sb_primary_font_regular.style }};
      font-weight: {{ sb_primary_font_regular.weight }};
      font-display: swap;
    }
    @font-face {
      font-family: 'SB Primary';
      src: url('{{ sb_primary_font_medium | font_url }}');
      font-style: {{ sb_primary_font_medium.style }};
      font-weight: {{ sb_primary_font_medium.weight }};
      font-display: swap;
    }
    @font-face {
      font-family: 'SB Primary';
      src: url('{{ sb_primary_font_semibold | font_url }}');
      font-style: {{ sb_primary_font_semibold.style }};
      font-weight: {{ sb_primary_font_semibold.weight }};
      font-display: swap;
    }
    @font-face {
      font-family: 'SB Primary';
      src: url('{{ sb_primary_font_bold | font_url }}');
      font-style: {{ sb_primary_font_bold.style }};
      font-weight: {{ sb_primary_font_bold.weight }};
      font-display: swap;
    }
    @font-face {
      font-family: 'SB Primary';
      src: url('{{ sb_primary_font_italic | font_url }}');
      font-style: {{ sb_primary_font_italic.style }};
      font-weight: {{ sb_primary_font_italic.weight }};
      font-display: swap;
    }
    @font-face {
      font-family: 'SB Primary';
      src: url('{{ sb_primary_font_bold_italic | font_url }}');
      font-style: {{ sb_primary_font_bold_italic.style }};
      font-weight: {{ sb_primary_font_bold_italic.weight }};
      font-display: swap;
    }
  {% endunless %}

  {% unless settings.type_display_font.system? %}
    @font-face {
      font-family: 'SB Display';
      src: url('{{ sb_display_font_regular | font_url }}');
      font-style: {{ sb_display_font_regular.style }};
      font-weight: {{ sb_display_font_regular.weight }};
      font-display: swap;
    }
    @font-face {
      font-family: 'SB Display';
      src: url('{{ sb_display_font_bold | font_url }}');
      font-style: {{ sb_display_font_bold.style }};
      font-weight: {{ sb_display_font_bold.weight }};
      font-display: swap;
    }
  {% endunless %}

  :root {
    --font-primary--family:
      {% if settings.type_primary_font.system? %}{{ settings.type_primary_font.family }}, {% else %}'SB Primary', {% endif %}
      {{ settings.type_primary_font.fallback_families }};
    --font-primary--style: {{ settings.type_primary_font.style }};
    --font-primary--weight: {{ settings.type_primary_font.weight }};
    --font-display--family:
      {% if settings.type_display_font.system? %}{{ settings.type_display_font.family }}, {% else %}'SB Display', {% endif %}
      {{ settings.type_display_font.fallback_families }};

    --font-size-hero: 2rem;
    --font-size-title: 1.75rem;
    --font-size-callout: 1.25rem;
    --font-size-body: 1rem;
    --font-size-caption: 0.75rem;

    /* Semantic spacing scale (mobile defaults) */
    --sb-space-2: 1px;
    --sb-space-4: 2px;
    --sb-space-6: 4px;
    --sb-space-8: 6px;
    --sb-space-12: 8px;
    --sb-space-16: 12px;
    --sb-space-20: 16px;
    --sb-space-24: 20px;
    --sb-space-30: 24px;
    --sb-space-36: 30px;
    --sb-space-48: 36px;
    --sb-space-64: 48px;
    --sb-space-96: 64px;
    --sb-space-128: 96px;

    --sb-radius-pill: 999px;
    --sb-radius-card: 1.5rem;

    /* Dark theme source tokens */
    --sb-dark-primary-500: #00b59c;
    --sb-dark-blue-500: #5c7cfa;
    --sb-dark-orange-500: #e67702;
    --sb-dark-reviews: #ea983e;
    --sb-dark-reviews-50: rgba(234, 152, 62, 0.5);
    --sb-dark-purple-500: #9f5afa;
    --sb-dark-red-500: #ef4e4e;
    --sb-dark-tangerine-pop-500: #ff9e3d;
    --sb-dark-grape-jam-500: #9b6acd;
    --sb-dark-berry-blue-700: #77a6d3;
    --sb-dark-primary-300: #5ccfc1;
    --sb-dark-primary-700: #008f80;
    --sb-dark-always-white: #ffffff;
    --sb-dark-always-black: #000000;
    --sb-dark-neutral-100: #000000;
    --sb-dark-neutral-100-25: rgba(0, 0, 0, 0.25);
    --sb-dark-neutral-200: #1e1e1e;
    --sb-dark-neutral-300: #2d2d2d;
    --sb-dark-neutral-400: #373737;
    --sb-dark-neutral-500: #414141;
    --sb-dark-neutral-600: #4b4b4b;
    --sb-dark-neutral-700: #737373;
    --sb-dark-neutral-800: #9b9b9b;
    --sb-dark-neutral-900: #ffffff;
    --sb-dark-neutral-900-0: rgba(255, 255, 255, 0);
    --sb-dark-neutral-900-12: rgba(255, 255, 255, 0.12);
    --sb-dark-neutral-900-25: rgba(255, 255, 255, 0.25);
    --sb-dark-neutral-900-75: rgba(255, 255, 255, 0.75);
    --sb-dark-primary-500-0: rgba(0, 181, 156, 0);
    --sb-dark-primary-500-25: rgba(0, 181, 156, 0.25);
    --sb-dark-primary-300-25: rgba(92, 207, 193, 0.25);
    --sb-dark-always-white-25: rgba(255, 255, 255, 0.25);
    --sb-dark-always-white-50: rgba(255, 255, 255, 0.5);
    --sb-dark-always-white-0: rgba(255, 255, 255, 0);
    --sb-dark-always-black-25: rgba(0, 0, 0, 0.25);

    /* Light theme source tokens */
    --sb-light-primary-500: #00b59c;
    --sb-light-blue-500: #0037c2;
    --sb-light-orange-500: #e67702;
    --sb-light-reviews: #ea983e;
    --sb-light-reviews-50: rgba(234, 152, 62, 0.5);
    --sb-light-purple-500: #9f5afa;
    --sb-light-red-500: #d6253e;
    --sb-light-tangerine-pop-500: #ff9e3d;
    --sb-light-grape-jam-500: #9b6acd;
    --sb-light-berry-blue-700: #77a6d3;
    --sb-light-primary-300: #5ccfc1;
    --sb-light-primary-700: #008f80;
    --sb-light-always-white: #ffffff;
    --sb-light-always-black: #000000;
    --sb-light-neutral-100: #ffffff;
    --sb-light-neutral-100-25: rgba(255, 255, 255, 0.25);
    --sb-light-neutral-200: #f5f5f5;
    --sb-light-neutral-300: #ebebeb;
    --sb-light-neutral-400: #e1e1e1;
    --sb-light-neutral-500: #d7d7d7;
    --sb-light-neutral-600: #cdcdcd;
    --sb-light-neutral-700: #a5a5a5;
    --sb-light-neutral-800: #7d7d7d;
    --sb-light-neutral-900: #000000;
    --sb-light-neutral-900-0: rgba(0, 0, 0, 0);
    --sb-light-neutral-900-12: rgba(0, 0, 0, 0.12);
    --sb-light-neutral-900-25: rgba(0, 0, 0, 0.25);
    --sb-light-neutral-900-75: rgba(0, 0, 0, 0.75);
    --sb-light-primary-500-0: rgba(0, 181, 156, 0);
    --sb-light-primary-500-25: rgba(0, 181, 156, 0.25);
    --sb-light-primary-300-25: rgba(92, 207, 193, 0.25);
    --sb-light-always-white-25: rgba(255, 255, 255, 0.35);
    --sb-light-always-white-50: rgba(255, 255, 255, 0.65);
    --sb-light-always-white-0: rgba(255, 255, 255, 0);
    --sb-light-always-black-25: rgba(0, 0, 0, 0.14);

    /* Active theme tokens (default: dark) */
    --sb-color-primary-500: var(--sb-dark-primary-500);
    --sb-color-blue-500: var(--sb-dark-blue-500);
    --sb-color-orange-500: var(--sb-dark-orange-500);
    --sb-color-reviews: var(--sb-dark-reviews);
    --sb-color-reviews-50: var(--sb-dark-reviews-50);
    --sb-color-purple-500: var(--sb-dark-purple-500);
    --sb-color-red-500: var(--sb-dark-red-500);
    --sb-color-tangerine-pop-500: var(--sb-dark-tangerine-pop-500);
    --sb-color-grape-jam-500: var(--sb-dark-grape-jam-500);
    --sb-color-berry-blue-700: var(--sb-dark-berry-blue-700);
    --sb-color-primary-300: var(--sb-dark-primary-300);
    --sb-color-primary-700: var(--sb-dark-primary-700);
    --sb-color-always-white: var(--sb-dark-always-white);
    --sb-color-always-black: var(--sb-dark-always-black);
    --sb-color-neutral-100: var(--sb-dark-neutral-100);
    --sb-color-neutral-100-25: var(--sb-dark-neutral-100-25);
    --sb-color-neutral-200: var(--sb-dark-neutral-200);
    --sb-color-neutral-300: var(--sb-dark-neutral-300);
    --sb-color-neutral-400: var(--sb-dark-neutral-400);
    --sb-color-neutral-500: var(--sb-dark-neutral-500);
    --sb-color-neutral-600: var(--sb-dark-neutral-600);
    --sb-color-neutral-700: var(--sb-dark-neutral-700);
    --sb-color-neutral-800: var(--sb-dark-neutral-800);
    --sb-color-neutral-900: var(--sb-dark-neutral-900);
    --sb-color-neutral-900-0: var(--sb-dark-neutral-900-0);
    --sb-color-neutral-900-12: var(--sb-dark-neutral-900-12);
    --sb-color-neutral-900-25: var(--sb-dark-neutral-900-25);
    --sb-color-neutral-900-75: var(--sb-dark-neutral-900-75);
    --sb-color-primary-500-0: var(--sb-dark-primary-500-0);
    --sb-color-primary-500-25: var(--sb-dark-primary-500-25);
    --sb-color-primary-300-25: var(--sb-dark-primary-300-25);
    --sb-color-always-white-25: var(--sb-dark-always-white-25);
    --sb-color-always-white-50: var(--sb-dark-always-white-50);
    --sb-color-always-white-0: var(--sb-dark-always-white-0);
    --sb-color-always-black-25: var(--sb-dark-always-black-25);

    --page-width: {{ settings.max_page_width }}px;
    --page-margin-mobile: {{ settings.mobile_page_margin }}px;
    --page-margin-desktop: {{ settings.desktop_page_margin }}px;
    --page-margin: var(--page-margin-mobile);
    --color-background: var(--sb-color-neutral-100);
    --color-foreground: var(--sb-color-neutral-900);
    --style-border-radius-inputs: {{ settings.input_corner_radius }}px;
  }

  @media (min-width: 750px) {
    :root {
      --page-margin: var(--page-margin-desktop);
      --font-size-hero: 3rem;
      --font-size-title: 2.25rem;
      --font-size-callout: 1.5rem;
      --font-size-body: 1.125rem;
      --font-size-caption: 0.875rem;

      /* Semantic spacing scale (desktop + tablet) */
      --sb-space-2: 2px;
      --sb-space-4: 4px;
      --sb-space-6: 6px;
      --sb-space-8: 8px;
      --sb-space-12: 12px;
      --sb-space-16: 16px;
      --sb-space-20: 20px;
      --sb-space-24: 24px;
      --sb-space-30: 30px;
      --sb-space-36: 36px;
      --sb-space-48: 48px;
      --sb-space-64: 64px;
      --sb-space-96: 96px;
      --sb-space-128: 128px;
    }
  }

  html[data-theme='light'] {
    --sb-color-primary-500: var(--sb-light-primary-500);
    --sb-color-blue-500: var(--sb-light-blue-500);
    --sb-color-orange-500: var(--sb-light-orange-500);
    --sb-color-reviews: var(--sb-light-reviews);
    --sb-color-reviews-50: var(--sb-light-reviews-50);
    --sb-color-purple-500: var(--sb-light-purple-500);
    --sb-color-red-500: var(--sb-light-red-500);
    --sb-color-tangerine-pop-500: var(--sb-light-tangerine-pop-500);
    --sb-color-grape-jam-500: var(--sb-light-grape-jam-500);
    --sb-color-berry-blue-700: var(--sb-light-berry-blue-700);
    --sb-color-primary-300: var(--sb-light-primary-300);
    --sb-color-primary-700: var(--sb-light-primary-700);
    --sb-color-always-white: var(--sb-light-always-white);
    --sb-color-always-black: var(--sb-light-always-black);
    --sb-color-neutral-100: var(--sb-light-neutral-100);
    --sb-color-neutral-100-25: var(--sb-light-neutral-100-25);
    --sb-color-neutral-200: var(--sb-light-neutral-200);
    --sb-color-neutral-300: var(--sb-light-neutral-300);
    --sb-color-neutral-400: var(--sb-light-neutral-400);
    --sb-color-neutral-500: var(--sb-light-neutral-500);
    --sb-color-neutral-600: var(--sb-light-neutral-600);
    --sb-color-neutral-700: var(--sb-light-neutral-700);
    --sb-color-neutral-800: var(--sb-light-neutral-800);
    --sb-color-neutral-900: var(--sb-light-neutral-900);
    --sb-color-neutral-900-0: var(--sb-light-neutral-900-0);
    --sb-color-neutral-900-12: var(--sb-light-neutral-900-12);
    --sb-color-neutral-900-25: var(--sb-light-neutral-900-25);
    --sb-color-neutral-900-75: var(--sb-light-neutral-900-75);
    --sb-color-primary-500-0: var(--sb-light-primary-500-0);
    --sb-color-primary-500-25: var(--sb-light-primary-500-25);
    --sb-color-primary-300-25: var(--sb-light-primary-300-25);
    --sb-color-always-white-25: var(--sb-light-always-white-25);
    --sb-color-always-white-50: var(--sb-light-always-white-50);
    --sb-color-always-white-0: var(--sb-light-always-white-0);
    --sb-color-always-black-25: var(--sb-light-always-black-25);
  }

  html[data-theme='dark'] {
    --sb-color-primary-500: var(--sb-dark-primary-500);
    --sb-color-blue-500: var(--sb-dark-blue-500);
    --sb-color-orange-500: var(--sb-dark-orange-500);
    --sb-color-reviews: var(--sb-dark-reviews);
    --sb-color-reviews-50: var(--sb-dark-reviews-50);
    --sb-color-purple-500: var(--sb-dark-purple-500);
    --sb-color-red-500: var(--sb-dark-red-500);
    --sb-color-tangerine-pop-500: var(--sb-dark-tangerine-pop-500);
    --sb-color-grape-jam-500: var(--sb-dark-grape-jam-500);
    --sb-color-berry-blue-700: var(--sb-dark-berry-blue-700);
    --sb-color-primary-300: var(--sb-dark-primary-300);
    --sb-color-primary-700: var(--sb-dark-primary-700);
    --sb-color-always-white: var(--sb-dark-always-white);
    --sb-color-always-black: var(--sb-dark-always-black);
    --sb-color-neutral-100: var(--sb-dark-neutral-100);
    --sb-color-neutral-100-25: var(--sb-dark-neutral-100-25);
    --sb-color-neutral-200: var(--sb-dark-neutral-200);
    --sb-color-neutral-300: var(--sb-dark-neutral-300);
    --sb-color-neutral-400: var(--sb-dark-neutral-400);
    --sb-color-neutral-500: var(--sb-dark-neutral-500);
    --sb-color-neutral-600: var(--sb-dark-neutral-600);
    --sb-color-neutral-700: var(--sb-dark-neutral-700);
    --sb-color-neutral-800: var(--sb-dark-neutral-800);
    --sb-color-neutral-900: var(--sb-dark-neutral-900);
    --sb-color-neutral-900-0: var(--sb-dark-neutral-900-0);
    --sb-color-neutral-900-12: var(--sb-dark-neutral-900-12);
    --sb-color-neutral-900-25: var(--sb-dark-neutral-900-25);
    --sb-color-neutral-900-75: var(--sb-dark-neutral-900-75);
    --sb-color-primary-500-0: var(--sb-dark-primary-500-0);
    --sb-color-primary-500-25: var(--sb-dark-primary-500-25);
    --sb-color-primary-300-25: var(--sb-dark-primary-300-25);
    --sb-color-always-white-25: var(--sb-dark-always-white-25);
    --sb-color-always-white-50: var(--sb-dark-always-white-50);
    --sb-color-always-white-0: var(--sb-dark-always-white-0);
    --sb-color-always-black-25: var(--sb-dark-always-black-25);
  }

  @media (prefers-color-scheme: light) {
    html[data-theme='auto'] {
      --sb-color-primary-500: var(--sb-light-primary-500);
      --sb-color-blue-500: var(--sb-light-blue-500);
      --sb-color-orange-500: var(--sb-light-orange-500);
      --sb-color-reviews: var(--sb-light-reviews);
      --sb-color-reviews-50: var(--sb-light-reviews-50);
      --sb-color-purple-500: var(--sb-light-purple-500);
      --sb-color-red-500: var(--sb-light-red-500);
      --sb-color-primary-300: var(--sb-light-primary-300);
      --sb-color-primary-700: var(--sb-light-primary-700);
      --sb-color-always-white: var(--sb-light-always-white);
      --sb-color-always-black: var(--sb-light-always-black);
      --sb-color-neutral-100: var(--sb-light-neutral-100);
      --sb-color-neutral-100-25: var(--sb-light-neutral-100-25);
      --sb-color-neutral-200: var(--sb-light-neutral-200);
      --sb-color-neutral-300: var(--sb-light-neutral-300);
      --sb-color-neutral-400: var(--sb-light-neutral-400);
      --sb-color-neutral-500: var(--sb-light-neutral-500);
      --sb-color-neutral-600: var(--sb-light-neutral-600);
      --sb-color-neutral-700: var(--sb-light-neutral-700);
      --sb-color-neutral-800: var(--sb-light-neutral-800);
      --sb-color-neutral-900: var(--sb-light-neutral-900);
      --sb-color-neutral-900-0: var(--sb-light-neutral-900-0);
      --sb-color-neutral-900-12: var(--sb-light-neutral-900-12);
      --sb-color-neutral-900-25: var(--sb-light-neutral-900-25);
      --sb-color-neutral-900-75: var(--sb-light-neutral-900-75);
      --sb-color-primary-500-0: var(--sb-light-primary-500-0);
      --sb-color-primary-500-25: var(--sb-light-primary-500-25);
      --sb-color-primary-300-25: var(--sb-light-primary-300-25);
      --sb-color-always-white-25: var(--sb-light-always-white-25);
      --sb-color-always-white-50: var(--sb-light-always-white-50);
      --sb-color-always-white-0: var(--sb-light-always-white-0);
      --sb-color-always-black-25: var(--sb-light-always-black-25);
    }
  }

  .font-hero {
    font-family: var(--font-display--family);
    font-size: var(--font-size-hero);
    line-height: 1.1;
  }

  .font-title {
    font-family: var(--font-display--family);
    font-size: var(--font-size-title);
    line-height: 1.2;
  }

  .font-callout {
    font-family: var(--font-primary--family);
    font-size: var(--font-size-callout);
    line-height: 1.25;
  }

  .font-body {
    font-family: var(--font-primary--family);
    font-size: var(--font-size-body);
    line-height: 1.35;
  }

  .font-caption {
    font-family: var(--font-primary--family);
    font-size: var(--font-size-caption);
    line-height: 1.35;
  }

  .weight-regular {
    font-weight: 400;
  }

  .weight-semibold {
    font-weight: 600;
  }

  .weight-bold {
    font-weight: 700;
  }

  .link-neutral-800 {
    color: var(--sb-color-neutral-800);
    text-decoration: none;
  }

  .link-neutral-800:hover,
  .link-neutral-800:focus-visible {
    color: var(--sb-color-primary-500);
    text-decoration: none;
  }

  .link-neutral-900 {
    color: var(--sb-color-neutral-900);
    text-decoration: none;
  }

  .link-neutral-900:hover,
  .link-neutral-900:focus-visible {
    color: var(--sb-color-primary-500);
    text-decoration: none;
  }
{% endstyle %}
